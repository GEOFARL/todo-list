(()=>{"use strict";class e{constructor(e,t="No date",a=!1){this.name=e,this.dueDate=t,this.checked=a}}class t{constructor(e,t,a,n=1,r="",i="none"){this.id=t,this.active=a,this.name=e,this.priority=Number(n),this.description=r,this.dueDate=i,this.tasks=[]}isDynamic(){return!["Today","This week"].includes(this.name)}addTask(e){this.tasks.push(e)}removeCheckedTasks(){this.tasks=this.tasks.filter((e=>!1===e.checked))}}class a{constructor(){this.projects=[],this.projects.push(new t("Inbox",1,!0,4)),this.projects.push(new t("Today",2,!1,4)),this.projects.push(new t("This week",3,!1,4))}addProject(e){this.projects.push(e)}removeProject(e){this.projects.splice(this.projects.findIndex((t=>t.id===e)),1)}}function n(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){n(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===r(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function s(e,t){n(2,arguments);var a=i(e),r=i(t),s=a.getTime()-r.getTime();return s<0?-1:s>0?1:s}Math.pow(10,8);var o=36e5;function c(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function d(e,t){var a;n(1,arguments);var r=c(null!==(a=null==t?void 0:t.additionalDigits)&&void 0!==a?a:2);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,s=y(e);if(s.date){var o=m(s.date,r);i=f(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var d,l=i.getTime(),u=0;if(s.time&&(u=g(s.time),isNaN(u)))return new Date(NaN);if(!s.timezone){var p=new Date(l+u),v=new Date(0);return v.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),v.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),v}return d=b(s.timezone),isNaN(d)?new Date(NaN):new Date(l+u+d)}var l={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},u=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,p=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,v=/^([+-])(\d{2})(?::?(\d{2}))?$/;function y(e){var t,a={},n=e.split(l.dateTimeDelimiter);if(n.length>2)return a;if(/:/.test(n[0])?t=n[0]:(a.date=n[0],t=n[1],l.timeZoneDelimiter.test(a.date)&&(a.date=e.split(l.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){var r=l.timezone.exec(t);r?(a.time=t.replace(r[1],""),a.timezone=r[1]):a.time=t}return a}function m(e,t){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(a);if(!n)return{year:NaN,restDateString:""};var r=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:null===i?r:100*i,restDateString:e.slice((n[1]||n[2]).length)}}function f(e,t){if(null===t)return new Date(NaN);var a=e.match(u);if(!a)return new Date(NaN);var n=!!a[4],r=h(a[1]),i=h(a[2])-1,s=h(a[3]),o=h(a[4]),c=h(a[5])-1;if(n)return function(e,t,a){return t>=1&&t<=53&&a>=0&&a<=6}(0,o,c)?function(e,t,a){var n=new Date(0);n.setUTCFullYear(e,0,4);var r=n.getUTCDay()||7,i=7*(t-1)+a+1-r;return n.setUTCDate(n.getUTCDate()+i),n}(t,o,c):new Date(NaN);var d=new Date(0);return function(e,t,a){return t>=0&&t<=11&&a>=1&&a<=(D[t]||(S(e)?29:28))}(t,i,s)&&function(e,t){return t>=1&&t<=(S(e)?366:365)}(t,r)?(d.setUTCFullYear(t,i,Math.max(r,s)),d):new Date(NaN)}function h(e){return e?parseInt(e):1}function g(e){var t=e.match(p);if(!t)return NaN;var a=k(t[1]),n=k(t[2]),r=k(t[3]);return function(e,t,a){if(24===e)return 0===t&&0===a;return a>=0&&a<60&&t>=0&&t<60&&e>=0&&e<25}(a,n,r)?a*o+6e4*n+1e3*r:NaN}function k(e){return e&&parseFloat(e.replace(",","."))||0}function b(e){if("Z"===e)return 0;var t=e.match(v);if(!t)return 0;var a="+"===t[1]?-1:1,n=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,r)?a*(n*o+6e4*r):NaN}var D=[31,null,31,30,31,30,31,31,30,31,30,31];function S(e){return e%400==0||e%4==0&&e%100!=0}function j(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function E(e){n(1,arguments);var t=i(e);return t.setHours(0,0,0,0),t}var N=864e5;function T(e,t){n(2,arguments);var a=E(e),r=E(t),i=a.getTime()-j(a),s=r.getTime()-j(r);return Math.round((i-s)/N)}const w=document.querySelector("header button"),L=document.querySelector(".projects .add"),q=document.querySelector(".add-project-popup"),$=document.querySelector("[data-submit-new-project]"),C=document.getElementById("project-name"),A=document.querySelector(".projects .inputs"),x=document.getElementById("priority"),M=document.getElementById("description"),I=document.getElementById("duedate"),U=document.querySelector("header"),H=document.querySelector("main"),F=document.querySelector("footer"),O=document.querySelector("body"),P=document.querySelector(".cross"),Y=document.querySelector(".right-part"),Z=new class{constructor(){this.listKey="listOfProjects"}saveList(e){localStorage.setItem(this.listKey,JSON.stringify(e))}getList(){let e=JSON.parse(localStorage.getItem(this.listKey));return e=Object.assign(new a,e),e.projects=e.projects.map((e=>e=Object.assign(new t,e))),e}},z=Z.getList()||new a;function B(){A.innerHTML="",function(){let e=X(1),t=X(2),a=X(3);W(e,1),W(t,2),W(a,3)}(),z.projects.forEach((e=>{let t=document.querySelector(`[data-project-id="${e.id}"]`);e.isDynamic()?t.addEventListener("click",(()=>G(t,e))):t.addEventListener("click",(()=>Q(t,e)))}))}function K(e,t){let a,n,r,i=document.createElement("div");i.classList.add("task");let s=!0===e.checked;"No date"===e.dueDate?(n=document.createElement("p"),n.innerText="No Date",r=document.createElement("input"),r.setAttribute("type","date"),r.setAttribute("name","taskDueDate"),r.setAttribute("id","task-dueDate"),r.setAttribute("data-active","false")):(r=document.createElement("input"),r.setAttribute("type","date"),r.setAttribute("name","taskDueDate"),r.setAttribute("id","task-dueDate"),r.setAttribute("data-active","true"),r.setAttribute("value",`${e.dueDate}`)),r.addEventListener("change",(()=>{e.dueDate=r.value,Z.saveList(z)})),i.innerHTML=`\n        <input type="checkbox" name="completed" id="task-check-${e.name}"/>\n        <label for="task-check-${e.name}">\n            <span class="custom-checkbox"></span>\n            ${e.name}\n        </label>`,n?(i.appendChild(n),i.appendChild(r),a=-60):(i.appendChild(r),a=-120),n&&n.addEventListener("click",(e=>{e.stopPropagation(),n.style.display="none",r.setAttribute("data-active","true"),a=-120,i.setAttribute("style",`--right: ${a}px`)})),i.setAttribute("style",`--right: ${a}px`);let o=i.querySelector("input");s&&o.setAttribute("checked",s),o.addEventListener("change",(()=>{e.checked=o.checked,Z.saveList(z);let a=t.tasks.filter((e=>!0===e.checked)).length,n=document.querySelector(".clear-tasks");if(a>0){let e=document.querySelector(".title-container");n||(e.innerHTML+='\n                <button class="clear-tasks">\n                    Clear tasks\n                    <i class="fa-sharp fa-solid fa-xmark"></i>\n                </button>'),n=document.querySelector(".clear-tasks"),n&&2!==t.id&&3!==t.id&&n.addEventListener("click",(()=>{t.removeCheckedTasks(),Z.saveList(z),G(document.querySelector(`[data-project-id="${t.id}"]`),t)}))}else n&&n.remove()})),Y.querySelector(".tasks-storage").appendChild(i)}function J(){q.style.display="none",H.style.filter=U.style.filter=F.style.filter="none",H.style.pointerEvents=U.style.pointerEvents=F.style.pointerEvents="auto",O.style.position="static"}function R(){C.value="",M.value="",x.value="1",I.value=""}function W(e,t){0!==e.length?(!function(e,t){let a=document.createElement("div");a.classList.add("bar"),a.setAttribute("data-bar-index",`${t}`),a.style.backgroundColor=e,document.querySelector(`[data-bar-index='${t}']`)||A.appendChild(a)}(V(t),t),e.forEach((e=>{(function(e){return document.querySelector(`[data-project-id='${e.id}']`)})(e)||function(e){let t=document.createElement("div");t.classList.add("elem"),t.setAttribute("data-project-id",e.id),t.innerHTML=`<i class="fa-solid fa-list"></i><div>${e.name}</div><i class="fa-sharp fa-solid fa-xmark"></i>`,t.querySelector(".fa-xmark").addEventListener("click",(t=>{t.stopPropagation(),z.removeProject(e.id),Z.saveList(z),B(),e.active&&G(document.querySelector('[data-project-id="1"]'),z.projects[0])})),A.appendChild(t)}(e)}))):function(e){let t=document.querySelector(`[data-bar-index="${e}"]`);null!==t&&t.remove()}(t)}function G(t,a){let n=t.querySelector("div").innerText,r=Y.clientWidth-60,i=a.tasks.filter((e=>!0===e.checked)).length;if(Y.innerHTML=0!==i&&void 0!==i?`\n            <div class="title-container">\n                <div class="section-title">${n}</div>\n                <button class="clear-tasks">\n                    Clear tasks\n                    <i class="fa-sharp fa-solid fa-xmark"></i>\n                </button>\n            </div>`:`\n            <div class="title-container">\n                <div class="section-title">${n}</div>\n            </div>`,1===a.id){Y.innerHTML+='\n        <div class="tasks-storage"></div>\n        <button class="add" data-active="true">\n            <i class="fa-solid fa-plus"></i>\n            <div>Add Task</div>\n        </button>\n        <div class="new-task">\n            <input type="text" />\n            <button class="add-task">Add</button>\n            <button class="cancel-task">Cancel</button>\n        </div>';let e=a.tasks.filter((e=>"No date"!==e.dueDate));e.sort(((e,t)=>s(d(e.dueDate),d(t.dueDate)))),0!==e.length&&e.forEach((e=>{K(e,a)}));let t=a.tasks.filter((e=>"No date"===e.dueDate));0!==t.length&&t.forEach((e=>{K(e,a)}))}else{Y.innerHTML+=`\n        <div class="project-description" style="width:${r}px">\n          ${a.description}\n        </div>\n        <div class="flex">\n          <input type="date" name="prjDate" value="${a.dueDate}" />\n          <div class="prj-priority" style="background-color: ${V(a.priority)}"></div>\n        </div>\n        <div class="priority-picker" data-priority-active="false">\n          <div class="high pr" data-priority="1"></div>\n          <div class="middle pr" data-priority="2"></div>\n          <div class="low pr" data-priority="3"></div>\n        </div>\n        <div class="tasks-storage"></div>\n        <button class="add" data-active="true">\n          <i class="fa-solid fa-plus"></i>\n          <div>Add Task</div>\n        </button>\n        <div class="new-task">\n          <input type="text" /><button class="add-task">Add</button\n          ><button class="cancel-task">Cancel</button>\n        </div>`;let e=a.tasks.filter((e=>"No date"!==e.dueDate));e.sort(((e,t)=>s(d(e.dueDate),d(t.dueDate)))),0!==e.length&&e.forEach((e=>{K(e,a)}));let t=a.tasks.filter((e=>"No date"===e.dueDate));0!==t.length&&t.forEach((e=>{K(e,a)}));let n=document.querySelector(".prj-priority"),i=document.querySelector(".priority-picker");n.addEventListener("click",(()=>{"false"===i.getAttribute("data-priority-active")?(i.style.display="inline-flex",i.setAttribute("data-priority-active","true")):(i.style.display="none",i.setAttribute("data-priority-active","false"))})),[...document.querySelectorAll(".pr")].forEach((e=>{e.addEventListener("click",(e=>{a.priority=Number(e.target.getAttribute("data-priority")),Z.saveList(z),document.querySelector(".prj-priority").style.backgroundColor=V(a.priority),i.style.display="none",i.setAttribute("data-priority-active","false"),B()}))}));let o=document.querySelector(".flex input");o.addEventListener("change",(()=>{a.dueDate=o.value,Z.saveList(z),B()}))}let o=document.querySelector(".clear-tasks");o&&o.addEventListener("click",(()=>{a.removeCheckedTasks(),Z.saveList(z),G(document.querySelector(`[data-project-id="${a.id}"]`),a)})),function(t){const a=document.querySelector(".new-task"),n=document.querySelector(".right-part .add"),r=a.querySelector(".cancel-task"),i=document.querySelector(".add-task"),s=document.querySelector(".new-task input");n.addEventListener("click",(()=>{n.setAttribute("data-active","false"),a.style.display="block"})),r.addEventListener("click",(()=>{n.setAttribute("data-active","true"),a.style.display="none"})),i.addEventListener("click",(()=>{if(""!==s.value){let r=z.projects.findIndex((e=>e.id===t.id));t.addTask(new e(s.value)),Z.saveList(z),2===t.id||3===t.id?Q(document.querySelector(`[data-project-id="${t.id}"]`),z.projects[t.id-1]):G(document.querySelector(`[data-project-id="${t.id}"]`),z.projects[r]),n.setAttribute("data-active","true"),a.style.display="none"}}))}(a),z.projects.forEach((e=>{e.active=!1;let t=document.querySelector(`[data-project-id='${e.id}']`);t.classList.contains("active")&&t.classList.remove("active")})),a.active=!0,t.classList.add("active")}function Q(e,t){let a=[],n=new Date;2===t.id?z.projects.forEach((e=>{e.tasks.forEach((e=>{let t=T(d(e.dueDate),n);t<=1&&t>=0&&a.push(e)}))})):z.projects.forEach((e=>{e.tasks.forEach((e=>{let t=T(d(e.dueDate),n);t<=7&&t>=0&&a.push(e)}))})),Y.innerHTML=`\n        <div class="title-container">\n            <div class="section-title">${t.name}</div>\n        </div>\n        <div class="tasks-storage"></div>`;let r=a.filter((e=>"No date"!==e.dueDate));r.sort(((e,t)=>s(d(e.dueDate),d(t.dueDate)))),0!==r.length&&r.forEach((e=>{K(e,t)}));let i=a.filter((e=>"No date"===e.dueDate));0!==i.length&&i.forEach((e=>{K(e,t)})),z.projects.forEach((e=>{e.active=!1;let t=document.querySelector(`[data-project-id='${e.id}']`);t.classList.contains("active")&&t.classList.remove("active")})),t.active=!0,e.classList.add("active")}function V(e){return["rgb(227, 28, 28)","rgb(255, 255, 69)","rgb(0, 202, 0)"][e-1]}function X(e){return z.projects.filter((t=>t.priority===e)).sort(((e,t)=>s(d(e.dueDate),d(t.dueDate))))}console.log(z),w.addEventListener("click",(()=>{const e=document.querySelector(".left-part");"none"===e.style.display?e.style.display="block":e.style.display="none"})),$.addEventListener("click",(()=>{if(""!==C.value&&""!==x.value&&""!==I.value){let e=new t(C.value,(new Date).getTime(),!1,x.value,M.value,I.value);z.addProject(e),Z.saveList(z),B(),R(),J()}})),L.addEventListener("click",(function(){q.style.display="block",H.style.filter=U.style.filter=F.style.filter="blur(20px)",H.style.pointerEvents=U.style.pointerEvents=F.style.pointerEvents="none",O.style.position="fixed",O.style.width="100%"})),P.addEventListener("click",(()=>{J(),R()})),B(),G(document.querySelector('[data-project-id="1"]'),z.projects[0])})();